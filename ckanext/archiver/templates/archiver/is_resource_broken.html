{#
Displays whether the resource is broken or not

Variable passed-in include:

"resource": {}

and all the Archival.as_dict() info from the package_show's resource['archiver'] e.g.

"status_id": 0,
"status": "Archived successfully",
"is_broken": false,
"is_broken_printable": "Downloaded OK",
"reason": "",
"url_redirected_to": null,

# Details of last successful archival
"cache_filepath": "/tmp/archive/ad/ad30c8f3-b3c7-4d5c-928f-df89f2cd7855/hospitals",
"cache_url": "http://localhost:4050/ad/ad30c8f3-b3c7-4d5c-928f-df89f2cd7855/hospitals",
"size": "7695"
"mimetype": "text/html",
"hash": "5466f7a55a2fc24fab4466c84fcde73d6d31c82a",

# History
"first_failure": null,
"last_success": "2015-11-17T10:28:00.018577",
"failure_count": 0,

"created": "2015-11-16T18:15:14.391913",
"updated": "2015-11-17T10:28:00.018577",

"resource_timestamp": "2015-10-29T11:09:07.258784",

#}
<div class="archiver {% if is_broken %}link-broken{% elif is_broken == None %}link-not-sure{% else %}link-not-broken{% endif %}">
  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title"><span class="fa fa-check-square-o"></span> {{ _('Validation') }}</h3>
    </div>
        <ul class="list-group">
          <li class="list-group-item">
        {%- if is_broken == True -%}
          <dl>
            <dt class="text-danger"><span class="fa fa-times"></span> {% trans %}Link is broken{% endtrans %}</dt>
            {% if reason %}
            <dd class="reason">{{ reason }}</dd>
            {% endif %}
            {% if failure_count == 1 %}
            <dd>{% trans %}This is a one-off failure{% endtrans %}</dd>
            {% else %}
            <dd>{% trans first_failure=h.render_datetime(first_failure) %}This resource has failed {{ failure_count }} times in a row since it first failed: {{ first_failure }}{% endtrans %}</dd>
            {% endif %}
            {% if last_success %}
            <dd>{% trans last_success=h.render_datetime(last_success) %}This resource was last ok: {{ last_success }}{% endtrans %}</dd>
            {% else %}
            <dd>{% trans created=h.render_datetime(created) %}We do not have a past record of it working since the first check: {{ created }}{% endtrans %}</dd>
            {% endif %}
          </dl>
          {%- elif is_broken == None -%}
          <dl>
            <dt class="text-warning">{% trans %}Link check is not conclusive{% endtrans %}.</dt>
            {% if reason %}
            <dd class="reason"><span class="fa fa-exclamation-triangle"></span> {{ reason }}</dd>
            {% endif %}
          </dl>
          {%- else-%}
          <dl>
            <dt class="text-success">{% trans %}Link is ok{% endtrans %}.</dt>
          </dl>
          {% if reason %}
          <dd class="reason"><span class="fa fa-check-circle"></span> {{ reason }}</dd>
          {% endif %}
        </li>
        {%- endif -%}
      {# doesn't work
        {% if resource_timestamp != resource['revision_timestamp'] %}
            This was tested with an older version of this resource. An update should occur soon.<!-- resource_timestamp {{resource_timestamp}} revision_timestamp {{resource['revision_timestamp']}}--> <br>
        {% endif %}
      #}
      <li class="list-group-item">{% trans updated=h.render_datetime(updated) %}Link checked: {{ updated }}{% endtrans %}</li>
      </ul>
  </div>
</div>

